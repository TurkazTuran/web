<button onclick="downloadXML()">Download XML</button>

<script>
async function downloadXML() {
    const today = new Date();
    for (let i = 0; i < 4; i++) {
        const date = new Date(today);
        date.setDate(today.getDate() - i);
        const formatted = date.toLocaleDateString('en-GB').split('/').reverse().join('.');
        try {
            const response = await fetch(`download.php?date=${formatted}`);
            if (!response.ok) throw new Error('Not found');
            const blob = await response.blob();
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `${formatted}.xml`;
            a.click();
            return;
        } catch (err) {
            console.warn(`Failed for ${formatted}: ${err.message}`);
        }
    }
    alert('Failed to download XML for the last 4 days');
}
</script>
