<!doctype html>
<html lang="az">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="light dark" />
  <title>TurkazTuran | Web</title>
  <meta name="description" content="Modern, animated, responsive index with image previews of your HTML pages." />

  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #0b0f14;
      --bg-2: #0f1621;
      --text: #e8eef5;
      --muted: #a6b3c2;
      --card: rgba(255, 255, 255, 0.06);
      --card-hover: rgba(255, 255, 255, 0.12);
      --accent: #6ee7ff;
      --accent-2: #7c5cff;
      --accent-3: #22d3ee;
      --shadow: 0 10px 25px rgba(0, 0, 0, 0.35);
      --radius: 16px;
      --ring: 0 0 0 2px color-mix(in oklab, var(--accent) 50%, transparent);
      --glass-blur: blur(10px);
      --frame-h: 440px;
    }
    [data-theme="light"] {
      --bg: #f7f9fc;
      --bg-2: #eaf0f7;
      --text: #0f1720;
      --muted: #4b5563;
      --card: rgba(255, 255, 255, 0.8);
      --card-hover: rgba(255, 255, 255, 0.92);
      --shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      --ring: 0 0 0 2px color-mix(in oklab, var(--accent-2) 45%, transparent);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
      color: var(--text);
      background: radial-gradient(1200px 800px at 20% -10%, #153463, transparent 60%),
                  radial-gradient(1200px 800px at 120% 10%, #2d134f, transparent 60%),
                  linear-gradient(120deg, var(--bg), var(--bg-2));
      background-attachment: fixed;
      overflow-x: hidden;
    }

    .gradient-overlay {
      position: fixed;
      inset: -20%;
      background: conic-gradient(from 0deg at 50% 50%, color-mix(in oklab, var(--accent) 85%, transparent) 0% 10%, transparent 10% 20%,
        color-mix(in oklab, var(--accent-2) 85%, transparent) 20% 30%, transparent 30% 40%,
        color-mix(in oklab, var(--accent-3) 85%, transparent) 40% 50%, transparent 50% 100%);
      filter: blur(80px) saturate(140%) opacity(0.35);
      animation: rotate 28s linear infinite;
      z-index: -1;
      pointer-events: none;
      transform-origin: 50% 50%;
    }
    @keyframes rotate { to { transform: rotate(360deg); } }

    header {
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: var(--glass-blur);
      background: color-mix(in oklab, var(--bg) 75%, transparent);
      border-bottom: 1px solid color-mix(in oklab, var(--text) 12%, transparent);
    }
    .nav {
      max-width: 1100px;
      margin: 0 auto;
      padding: 14px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }
    .brand {
      display: flex; align-items: center; gap: 12px; text-decoration: none; color: inherit;
    }
    .brand .logo {
      width: 36px; height: 36px; border-radius: 10px;
      background: radial-gradient(circle at 30% 30%, var(--accent), transparent 60%), linear-gradient(135deg, var(--accent-2), var(--accent-3));
      box-shadow: 0 6px 16px color-mix(in oklab, var(--accent-2) 30%, transparent);
    }
    .brand .title { font-weight: 800; letter-spacing: 0.2px; font-size: 1.05rem; }

    .controls { display: flex; align-items: center; gap: 10px; }
    .toggle {
      border: 1px solid color-mix(in oklab, var(--text) 15%, transparent);
      background: var(--card);
      color: var(--text);
      border-radius: 999px;
      padding: 8px 12px;
      display: inline-flex; align-items: center; gap: 8px;
      cursor: pointer;
      box-shadow: var(--shadow);
      backdrop-filter: var(--glass-blur);
    }
    .toggle:hover { background: var(--card-hover); }

    main { max-width: 1100px; margin: 0 auto; padding: 22px 20px 60px; }

    .toolbar {
      margin: 6px 0 18px;
      display: flex; gap: 12px; flex-wrap: wrap; align-items: center;
    }
    .search {
      flex: 1 1 280px;
      display: flex; align-items: center; gap: 10px;
      background: var(--card);
      border: 1px solid color-mix(in oklab, var(--text) 12%, transparent);
      border-radius: 12px; padding: 10px 12px;
      backdrop-filter: var(--glass-blur);
    }
    .search input {
      width: 100%; border: none; outline: none; background: transparent;
      color: var(--text); font-size: 0.98rem;
    }

    .grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 16px; }
    @media (max-width: 900px) { .grid { grid-template-columns: 1fr; } }

    .card {
      position: relative;
      background: var(--card);
      border: 1px solid color-mix(in oklab, var(--text) 12%, transparent);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      transition: transform .35s cubic-bezier(.2,.8,.2,1), background .2s ease, border-color .2s ease;
      backdrop-filter: var(--glass-blur);
      will-change: transform;
    }
    .card:hover {
      transform: translateY(-4px);
      background: var(--card-hover);
      border-color: color-mix(in oklab, var(--accent) 30%, transparent);
      box-shadow: 0 14px 35px color-mix(in oklab, var(--accent-2) 15%, transparent);
    }

    .card .head {
      display: grid; grid-template-columns: 56px 1fr auto; gap: 14px; align-items: center;
      color: inherit; text-decoration: none; padding: 16px;
    }
    .card .icon {
      width: 56px; height: 56px; border-radius: 12px;
      background: linear-gradient(135deg, color-mix(in oklab, var(--accent-3) 60%, transparent), color-mix(in oklab, var(--accent-2) 60%, transparent));
      display: grid; place-items: center;
      box-shadow: inset 0 0 20px rgba(255,255,255,.12);
    }
    .card .meta { display: grid; gap: 4px; }
    .card .title { font-weight: 800; letter-spacing: .2px; font-size: 1.02rem; }
    .card .desc { color: var(--muted); font-size: .9rem; }
    .arrow {
      width: 36px; height: 36px; border-radius: 999px;
      display: grid; place-items: center;
      background: color-mix(in oklab, var(--accent-2) 28%, transparent);
      transition: transform .25s ease, background .25s ease;
    }
    .card:hover .arrow { transform: translateX(4px); background: color-mix(in oklab, var(--accent) 40%, transparent); }

    .preview {
      position: relative;
      border-top: 1px solid color-mix(in oklab, var(--text) 10%, transparent);
      background: color-mix(in oklab, var(--bg-2) 40%, transparent);
    }
    .preview-link { display: block; color: inherit; text-decoration: none; }
    .preview-wrap {
      position: relative;
      width: 100%;
      height: var(--frame-h);
      overflow: hidden;
      border-radius: 0 0 var(--radius) var(--radius);
      isolation: isolate;
      background: color-mix(in oklab, var(--bg) 60%, transparent);
    }
    .preview-img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0;
      filter: saturate(105%);
      transition: opacity .35s ease, transform .35s cubic-bezier(.2,.8,.2,1);
    }
    .preview-img.visible {
      opacity: 1;
    }
    .card:hover .preview-img.visible {
      transform: scale(1.02);
    }
    .skeleton {
      position: absolute; inset: 0; border-radius: inherit;
      background:
        linear-gradient(90deg, rgba(255,255,255,0.05), rgba(255,255,255,0.12), rgba(255,255,255,0.05));
      background-size: 200% 100%;
      animation: shimmer 1.4s infinite;
      filter: saturate(120%);
      pointer-events: none;
    }
    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    .preview-status {
      position: absolute; inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 18px;
      text-align: center;
      font-size: 0.9rem;
      color: var(--muted);
      background: color-mix(in oklab, var(--bg) 80%, transparent);
      pointer-events: none;
    }

    .empty {
      display: none;
      margin: 24px 0; padding: 16px;
      border-radius: 12px; border: 1px dashed color-mix(in oklab, var(--text) 20%, transparent);
      background: var(--card);
      color: var(--muted);
    }

    footer { margin-top: 28px; color: var(--muted); text-align: center; font-size: 0.9rem; }
    .footer-content {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 14px;
      border-radius: 999px;
      background: color-mix(in oklab, var(--card) 80%, transparent);
      border: 1px solid color-mix(in oklab, var(--text) 8%, transparent);
      backdrop-filter: var(--glass-blur);
    }
    .footer-icon {
      width: 20px;
      height: 20px;
      border-radius: 6px;
      overflow: hidden;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 8px color-mix(in oklab, var(--accent) 45%, transparent);
    }
    .footer-icon img {
      width: 100%;
      height: 100%;
      display: block;
    }

    @media (prefers-reduced-motion: reduce) {
      .gradient-overlay, .card, .preview-img { animation: none !important; transition: none !important; }
    }

    body[data-theme="dark"] .footer-content {
      background: color-mix(in oklab, var(--text) 92%, transparent);
      color: var(--bg);
      border-color: color-mix(in oklab, var(--text) 60%, transparent);
    }

    body[data-theme="dark"] .footer-icon {
      box-shadow: 0 0 8px color-mix(in oklab, var(--text) 30%, transparent);
    }
  </style>
</head>
<body>
  <div class="gradient-overlay" aria-hidden="true"></div>

  <header>
    <nav class="nav" aria-label="Primary">
      <a class="brand" href="#">
        <span class="logo" aria-hidden="true"></span>
        <span class="title">TurkazTuran / web</span>
      </a>
      <div class="controls">
        <button id="themeToggle" class="toggle" type="button" aria-pressed="false" title="Tema dəyiş">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z" stroke="currentColor" stroke-width="1.6"/>
          </svg>
          <span>Tema</span>
        </button>
      </div>
    </nav>
  </header>

  <main>
    <section class="toolbar" aria-label="Search">
      <div class="search" role="search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="1.6"/>
          <path d="M20 20L17 17" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
        </svg>
        <input id="searchInput" type="search" placeholder="Səhifələrdə axtar…" autocomplete="off" aria-label="Səhifələrdə axtar">
      </div>
    </section>

    <section>
      <div id="cards" class="grid" role="list"></div>
      <div id="empty" class="empty" role="status">Axtarışa uyğun səhifə tapılmadı.</div>
    </section>

    <footer>
      <div class="footer-content">
        <span class="footer-icon" aria-hidden="true">
          <img src="https://github.githubassets.com/favicons/favicon.png" alt="">
        </span>
        <span>• Built with GitHub Copilot •</span>
      </div>
    </footer>
  </main>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <script>
    // Theme
    (function() {
      const key = 'tt_theme';
      const saved = localStorage.getItem(key);
      if (saved === 'light' || saved === 'dark') document.body.setAttribute('data-theme', saved);
      const btn = document.getElementById('themeToggle');
      const apply = (mode) => {
        document.body.setAttribute('data-theme', mode);
        localStorage.setItem(key, mode);
        btn.setAttribute('aria-pressed', mode === 'dark' ? 'true' : 'false');
      };
      btn.addEventListener('click', () => {
        const current = document.body.getAttribute('data-theme') || 'dark';
        apply(current === 'dark' ? 'light' : 'dark');
      });
      if (!saved) apply('dark');
    })();

    // Pages discovered in the repo with requested titles
    const pages = [
      { title: 'Namaz Vakti',        href: 'Namaz.html',              desc: 'Namaz vaxtları və məlumat', icon: 'moon'  },
      { title: 'Aylıq Xərclər',      href: 'ausgaben_rechner.html',   desc: 'Aylıq xərclər kalkulyatoru', icon: 'calc'  },
      { title: 'Valyuta Kursu',      href: 'currency.html',           desc: 'Kurslar və çevirici',        icon: 'money' },
    ];

    function iconSVG(kind) {
      switch (kind) {
        case 'calc':
          return `
            <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <rect x="3" y="3" width="18" height="18" rx="4" stroke="currentColor" stroke-width="1.6"/>
              <path d="M8 7h8" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
              <path d="M8 12h0" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
              <path d="M12 12h0" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
              <path d="M16 12h0" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
              <path d="M8 16h4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
              <path d="M15.5 15.5l1.5 1.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
              <path d="M17 15.5l-1.5 1.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
            </svg>
          `;
        case 'money':
          return `
            <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <rect x="3.5" y="6" width="17" height="12" rx="3" stroke="currentColor" stroke-width="1.6"/>
              <path d="M8 12c0-2.5 2-3.5 4-3.5s4 1 4 3-1.5 2.5-3 2.5-2 .7-2 2.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 9v8" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
              <circle cx="7" cy="9" r="1" fill="currentColor"/>
              <circle cx="17" cy="15" r="1" fill="currentColor"/>
            </svg>
          `;
        case 'moon':
        default:
          return `
            <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M4.5 21v-5.5l2-.9V9.7l-2-.9" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M19.5 21v-5.5l-2-.9V9.7l2-.9" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 3.5c-1.8 1.2-2.8 3-2.8 5v2.6H8.2V21h7.6V11.1h-1V8.5c0-2-1-3.8-2.8-5Z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9.5 16h5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
              <path d="M9.5 19h5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
            </svg>
          `;
      }
    }

    const list = document.getElementById('cards');
    const empty = document.getElementById('empty');

    function cardHTML(p) {
      return `
        <article class="card" role="listitem">
          <a class="head" href="${p.href}" aria-label="${p.title}">
            <div class="icon" aria-hidden="true">${iconSVG(p.icon)}</div>
            <div class="meta">
              <div class="title">${p.title}</div>
              <div class="desc">${p.desc || ''}</div>
            </div>
            <div class="arrow" aria-hidden="true">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M5 12h14M13 5l7 7-7 7" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </a>
          <div class="preview">
            <a class="preview-link" href="${p.href}" aria-label="${p.title} səhifəsini aç">
              <div class="preview-wrap">
                <div class="skeleton" aria-hidden="true"></div>
                <img class="preview-img" data-page="${p.href}" alt="Ön baxış: ${p.title}" loading="lazy" />
                <div class="preview-status" hidden>Ön baxış gətirilə bilmədi</div>
              </div>
            </a>
          </div>
        </article>
      `;
    }

    function render(items) {
      list.innerHTML = '';
      if (!items.length) { empty.style.display = 'block'; return; }
      empty.style.display = 'none';
      items.forEach((p, i) => {
        const container = document.createElement('div');
        container.innerHTML = cardHTML(p);
        const el = container.firstElementChild;
        el.style.animation = 'fadeInUp 500ms cubic-bezier(.2,.8,.2,1) forwards';
        el.style.opacity = '0';
        el.style.animationDelay = (70 * i) + 'ms';
        list.appendChild(el);
      });
      generateScreenshots();
    }
    const previewCache = new Map();
    const previewTasks = new Map();

    // Render static image previews using html2canvas and cache results.
    async function generateScreenshots() {
      if (typeof window.html2canvas !== 'function') return;
      const images = Array.from(document.querySelectorAll('.preview-img[data-page]'));
      for (const img of images) {
        const page = img.dataset.page;
        if (!page || img.dataset.rendered === 'true') continue;
        if (previewCache.has(page)) {
          applyPreview(img, previewCache.get(page));
          continue;
        }
        if (previewTasks.has(page)) {
          try {
            const cached = await previewTasks.get(page);
            previewCache.set(page, cached);
            applyPreview(img, cached);
          } catch (err) {
            console.warn('Preview capture failed for', page, err);
            showPreviewError(img);
          }
          continue;
        }
        try {
          const task = capturePage(page);
          previewTasks.set(page, task);
          const dataUrl = await task;
          previewCache.set(page, dataUrl);
          applyPreview(img, dataUrl);
        } catch (err) {
          console.warn('Preview capture failed for', page, err);
          showPreviewError(img);
        } finally {
          previewTasks.delete(page);
        }
      }
    }

    function applyPreview(img, dataUrl) {
      const container = img.parentElement;
      img.src = dataUrl;
      img.dataset.rendered = 'true';
      img.classList.add('visible');
      const skeleton = container && container.querySelector('.skeleton');
      if (skeleton) skeleton.remove();
      const status = container && container.querySelector('.preview-status');
      if (status) status.hidden = true;
    }

    function showPreviewError(img) {
      const container = img.parentElement;
      img.dataset.rendered = 'true';
      if (container) {
        const skeleton = container.querySelector('.skeleton');
        if (skeleton) skeleton.remove();
        const status = container.querySelector('.preview-status');
        if (status) status.hidden = false;
      }
    }

    function capturePage(href) {
      return new Promise((resolve, reject) => {
        const iframe = document.createElement('iframe');
        iframe.style.position = 'fixed';
        iframe.style.top = '-200vh';
        iframe.style.left = '0';
        iframe.style.width = '1280px';
        iframe.style.height = '720px';
        iframe.style.border = '0';
        iframe.style.visibility = 'hidden';
        iframe.style.pointerEvents = 'none';
        iframe.setAttribute('aria-hidden', 'true');

        const cleanup = () => {
          iframe.removeEventListener('load', onLoad);
          iframe.removeEventListener('error', onError);
          iframe.remove();
        };

        const onError = () => {
          cleanup();
          reject(new Error('Preview capture failed'));
        };

        const onLoad = async () => {
          try {
            const doc = iframe.contentDocument;
            if (!doc) throw new Error('Empty document');
            await new Promise(r => setTimeout(r, 280));
            iframe.contentWindow.scrollTo(0, 0);
            const bg = doc.body ? getComputedStyle(doc.body).backgroundColor : '#ffffff';
            const canvas = await html2canvas(doc.documentElement, {
              backgroundColor: bg,
              windowWidth: iframe.contentWindow.innerWidth,
              windowHeight: iframe.contentWindow.innerHeight,
              scale: 0.5,
              useCORS: true
            });
            cleanup();
            resolve(canvas.toDataURL('image/png'));
          } catch (error) {
            cleanup();
            reject(error);
          }
        };

        iframe.addEventListener('load', onLoad, { once: true });
        iframe.addEventListener('error', onError, { once: true });
        iframe.src = href;
        document.body.appendChild(iframe);
      });
    }

    const style = document.createElement('style');
    style.textContent = `
      @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
    `;
    document.head.appendChild(style);

    render(pages);

    // Search
    const search = document.getElementById('searchInput');
    search.addEventListener('input', (e) => {
      const q = e.target.value.trim().toLowerCase();
      const filtered = pages.filter(p =>
        p.title.toLowerCase().includes(q) ||
        (p.desc && p.desc.toLowerCase().includes(q)) ||
        p.href.toLowerCase().includes(q)
      );
      render(filtered);
    });
  </script>
</body>
</html>
